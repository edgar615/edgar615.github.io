---
layout: post
title: 订单
date: 2019-08-29
categories:
    - 设计
comments: true
permalink: order.html
---

最近做小型B2B和B2C电商，整理了下资料

# 订单重复提交

1. 在购物车页请求一个令牌，提交订单的时候校验令牌
2. 客户端点击提交订单后，将订单置灰

# 订单重复支付

因为真的同一个订单，用户可以用支付宝、微信等多种渠道付款，如果付款回调通知延时，可能会导致用户重复支付。针对这种情况的处理方式：

当手动回调通知后，会与业务订单进行对比，如果这个订单已被支付，就把多余的支付款作为“余额”退款到用户的“余额账户”上。这个“余额”本身可以被继续使用，也可以申请退款。



# 参考资料

https://www.pmcaff.com/discuss/index/774195160208448/



