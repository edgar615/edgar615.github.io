---
layout: post
title: 软件架构模型 - 4+1模型
date: 2021-02-02
categories:
    - 架构设计
comments: true
permalink: 4+1-model.html
---

“4+1”视图是对逻辑架构进行描述，最早由 Philippe Kruchten 提出，他在1995年的《IEEE Software》上发表了题为《The 4+1 View Model of Architecture》的论文，引起了业界的极大关注，现在是软件设计的结构标准。

所谓“**4+1视图**”，分别为场景视图、逻辑视图、物理视图、处理流程视图和开发视图。

> 4代表了4种视图，1表示基于某一个场景，结合4种视图进行说明。

![](/assets/images/posts/4+1-model/4+1-model-1.png)

![](/assets/images/posts/4+1-model/4+1-model-2.png)

# 1. **逻辑视图**

逻辑架构主要支持功能性需求――即在为用户提供服务方面系统所应该提供的功能。系统分解为一系列的关键抽象，（大多数）来自于问题域，表现为对象或对象类的形式。它们采用抽象、封装和继承的原理。分解并不仅仅是为了功能分析，而且用来识别遍布系统各个部分的通用机制和设计元素。

除了对系统职责进行划分，逻辑视图通常还要求对各逻辑元素间的关系，也就是接口进行描述。增加逻辑元素的接口进行描述对系统的设计和实现非常重要。因为软件设计最重要的原则就是高内聚、低耦合，一个满足此原则的系统不应该存在不合理的依赖关系，比如下层与上层间的反向依赖，或是循环依赖等。

一般，逻辑架构元素决定了开发组织（根据康威定律，反之亦然）。因此，逻辑元素的边界和接口也是后续多个开发组织之间进行接口控制的关系依据。设计合理的逻辑架构，可以提升团队的沟通效率，进而提升整个系统的交付效率和质量。

下面springcloud微服务的逻辑视图示例（仅部分），就描述了springcloud中各个功能组件。从这个图中，基本可以对springcloud有一个大颗粒度的了解。

![](/assets/images/posts/4+1-model/4+1-model-3.png)

# 2. **物理视图**

开发出的软件系统，最终是要运行在物理或软件环境上。物理环境可能是服务器、PC机、移动终端等物理设备；软件环境可以是虚拟机、容器、进程或线程。物理视图就是对这个部署信息进行描述。

物理架构主要关注系统非功能性的需求，如可用性、可靠性（容错性），性能（吞吐量）和可伸缩性。软件在计算机网络或处理节点上运行，被识别的各种元素（网络、过程、任务和对象），需要被映射至不同的节点；我们希望使用不同的物理配置：一些用于开发和测试，另外一些则用于不同地点和不同客户的部署。因此软件至节点的映射需要高度的灵活性及对源代码产生最小的影响。

![](/assets/images/posts/4+1-model/4+1-model-4.png)

# 3. **处理视图**

处理视图，又称过程视图、运行视图。用于描述系统软件组件之间的通信时序，数据的输入输出。在UML中通常由时序图和流程图表示，如下图所示：

![](/assets/images/posts/4+1-model/4+1-model-5.png)

# 4. **开发视图**

开发视图关注软件开发环境下实际模块的组织，反映系统开发实施过程。

一个设计良好的开发视图，应该能够满足以下要求：

> 通过逻辑架构元素，能够找到它所有代码和所有的二进制交付件 每一个代码源文件，都能够找到它所属的逻辑架构元素 每一个二进制交付件，都能够找到它集成了哪些逻辑架构元素

![](/assets/images/posts/4+1-model/4+1-model-6.png)

# 5. **场景视图**

场景视图，即4+1中的1。从前面的图可以看到，4+1中的4个视图都是围绕着场景视图为核心的。它用于描述系统的参与者与功能用例间的关系，反映系统的最终需求和交互设计。在UML中通常由用例图表示：

![](/assets/images/posts/4+1-model/4+1-model-7.png)